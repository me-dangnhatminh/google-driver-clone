datasource db {
  provider = "postgresql"
  url      = "postgresql://dangnhatminh:dangnhatminh@localhost:5432/dev_payment_master?schema=public"
}

generator client {
  provider = "prisma-client-js"
}

// Payment service

model Plan {
  id          String @id @map("id")
  name        String @map("name") // Basic, Premium, ...
  description String @map("description")
  price       Float  @map("price")
  currency    String @map("currency")
  interval    String @map("interval") // 30 days, 1 month, 1 year, ...
  metadata    Json?  @map("metadata")

  createdAt DateTime  @map("created_at")
  updatedAt DateTime  @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  @@map("plans")
}

model Subscription {
  id        String   @id @map("id")
  userId    String   @map("user_id")
  planId    String   @map("plan_id")
  status    String   @map("status")
  startedAt DateTime @map("started_at")
  endedAt   DateTime @map("ended_at")
  metadata  Json?    @map("metadata")

  createdAt DateTime  @map("created_at")
  updatedAt DateTime  @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  @@map("subscriptions")
}

model Payment {
  id             String @id @map("id")
  userId         String @map("user_id")
  subscriptionId String @map("subscription_id")
  amount         Float  @map("amount")
  currency       String @map("currency")
  status         String @map("status")
  metadata       Json?  @map("metadata")

  refoundAt DateTime? @map("refound_at")
  createdAt DateTime  @map("created_at")
  updatedAt DateTime  @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  @@map("payments")
}
